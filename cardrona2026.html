<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
	<title>swipemenutest</title>
	<meta content="Bryan M" name="author" />
	<link href="favicon.ico" rel="icon" type="image/x-icon" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

	<style>

    body {
      background-color: springGreen; //white; //black;
      font-family: Helvetica, Arial, sans-serif;
      padding: 0;
      margin: 0;
      overflow: auto;
    }

    #roundButton {
      background-color: #96D9FF;
      margin-bottom: 20px;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 10px solid #0065A6;
      outline: none;
      transition: transform .3s cubic-bezier(0, .52, 0, 1);
    }

    #roundButton:hover {
      background-color: #96D9FF;
      cursor: pointer;
      border-color: #003557;
      transform: scale(1.2, 1.2);
    }

    #roundButton:active {
      border-color: #003557;
      background-color: #FFF;
    }
	
	#menu1 {
		background: cyan;
		border: 2px solid blue;
		//opacity: 0.5;
	}

#menu2 {
		background: cyan;
		border: 2px solid blue;
	}

#menu3 {
		background: cyan;
		border: 2px solid blue;
	}

#menu4 {
		background: cyan;
		border: 2px solid blue;
	}

#menu5 {
		background: cyan;
		border: 2px solid blue;
	}

#menu6 {
		background: cyan;
		border: 2px solid blue;
	}

#menu7 {
		background: cyan;
		border: 2px solid blue;
	}

div {
		height: calc(100vh / 10);
		text-align: center;
		line-height: calc(100vh / 10);
		color: blue;
		font-size: 3vw;
	}
	
	.expandmenu1 {
	    height: 100vh;
	    transition: all 1s ease;
		opacity: 1;
	}
	
.contractmenu1 {
        opacity: 0.6;
	    height: 10vh;
	    transition: all 1s ease;
	}

	.expandmenu1txt {
	    transition: all 1s ease;
		opacity: 1;
	}
	
.contractmenu1txt {
        opacity: 0;
		
		
		//background: linear-gradient(rgba(0,0,0,.6), rgba(0,0,0,.6)), url('image.jpg');
		
		
		
	    //height: 10vh;
	    transition: all 1s ease;
	}


	
	img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
	
	#menu1txt {
		background: none; //gray;
		height: 50vh;
		width: 80vw;
		position: absolute;
        top: 20vh;
        left: 10vw;
        //display: none; 
		font-size: 6vw;
		
		
		text-shadow:
                -2px -2px 0 gray,
                2px -2px 0 gray,
                -2px 2px 0 gray,
                2px 2px 0 gray,
                -3px 0px 0 gray,
                3px 0px 0 gray,
                0px -3px 0 gray,
                0px 3px 0 gray;
	}
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
body {
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: 2vh;
    background-color: black;
    height: 88vh;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.container {
    width: 100vw;
    height: 88vh;
    position: relative;
}

:root {
    --team-height: 6vh;
    --team-spacing: 0.75vh;
}

.team {
    position: absolute;
    width: 90%;
    height: var(--team-height);
    background: rgba(105, 105, 105, 0.7); //dimGray; //var(--color);
    box-shadow: 0 3px 5px #0000001f;
    left: 50%;
    transform: translateX(-50%);
    top: calc(var(--i) * (var(--team-height) + var(--team-spacing)));
    display: flex;

    align-items: center;
    transition-property: top;
    transition-duration: 1500ms;
    border-radius: 10px;
    transition-timing-function: cubic-bezier(0.68, -0.55, 0.265, 1.55);
	
	
	
	
	border-radius: 10px;
		border: 4px solid rgba(255, 255, 255, 0.3);
		//box-shadow: 10px 10px 25px -2px black;
		background-clip: padding-box;
	
	

}

.name {
    width: 80%;
    height: 100%;
    display: flex;
    align-items: center;
    margin: 1vh 0;
    font-size: 1.4rem;
    color: #fff;
    font-weight: 400; //600;
    text-transform: capitalize;
}

.score {
    width: var(--team-height);
    margin: 1vh 1vw;
    font-size: 1.4rem;
    color: #fff;
    font-weight: 400; //600;
	text-align: center;
}

.position {
width: var(--team-height);
    margin: 1vh 1vw;
    font-size: 1.4rem;
    color: #fff;
    font-weight: 400; //600;	
	text-align: center;
}

.team i {
    width: 80px;
    height: var(--team-height);
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
    font-size: 1.8rem;
	
	
	
	
	
	border-radius: 10px;
		border: 4px solid rgba(255, 255, 255, 0.3);
		//box-shadow: 10px 10px 25px -2px black;
		background-clip: padding-box;
	
	
	
}

#down {
	position: absolute;
	left: 25vw;
	top: 40vh;
	width:50vw;
	height:58vw;
	background: gray;
	opacity:0.75;
	border-radius:10px;
	border-radius: 10px;
		border: 3px solid rgba(255, 255, 255, 0.2);
		box-shadow: 10px 10px 25px black;
		background-clip: padding-box;
}

//img {
//	width: 40vw;
//	height: 48vw;
//}

#msgx {
	padding-left: 5vw;
	padding-right: 5vw;
	font-size: 5vw;
	font-style: italic;
}
	
	
	
	
	
	
	
	
	
	
	
	
	
</style>
</head>
<body>
<!--
<button id="roundButton"></button>
-->
  <div id="container" class="container">
    <div id="menu1" onclick="activateMenu1()">
	<img src="c1.png" alt="1"></img>
	<div id="menu1txt" class="menu1txt"></div>
	</div>
	<div id="menu2">
	Day 2
	</div>
	<div id="menu3">
	Day 3
	</div>
	<div id="menu4">
	Day 4
	</div>
	<div id="menu5">
	Day 5
	</div>
	<div id="menu6">
	Day 6
	</div>
	<div id="menu7">
	Day 7
	</div>
	
	
	
  </div>
<script>
var data;





document.getElementById("menu1txt").className = "contractmenu1txt"
document.getElementById("menu1").className = "contractmenu1"
function activateMenu1() {
	var x = document.getElementsByClassName('expandmenu1txt');
    if (x.length > 0) {
        // shrink
	    document.getElementById("menu1").className = "contractmenu1"
	    document.getElementById("menu1txt").className = "contractmenu1txt"
	    //document.getElementById("menu1txt").style.display = "none"
	} else {
		// expand
		document.getElementById("menu1").className = "expandmenu1"
		document.getElementById("menu1txt").className = "expandmenu1txt"
		getData()
	}
}







// data is available here

async function getData() {
	    const url = "https://opensheet.elk.sh/177jxMJFqFd6ZDtLf4sLvBkaeIS8MU9drvNXmC_zKP-E/resultsday1";
        try {
        const dataStream = await fetch(url);
        if (!dataStream.ok) {
            throw new Error(`Response status: ${dataStream.status}`);
        }
        data = await dataStream.json();
        } catch (error) {
           console.error(error.message);
        }
 useData();
}





function useData() {
	//let container = document.querySelector(".container");
	let container = document.querySelector("#menu1txt");
	data
  .sort((a, b) => {
    if (b.score === a.score) {
      return a.name.localeCompare(b.name); // Sort by name if scores are equal
    }
    return b.score - a.score; // Sort by score in descending order
  })
  .forEach((e, i) => (e.position = i));
// build screen
data.forEach((el, i) => {
  let box = document.createElement("div");
  box.id= "box" + i;
  box.className = "team";
  box.style.setProperty("--i", i);  
  let name = document.createElement("span");
  name.id = "name" + i
  name.className = "name";
  let score = document.createElement("span");
  score.id = "score" + i
  score.className = "score";  
  let position = document.createElement("span");
  position.id = "position" + i
  position.className = "position";
  position.innerHTML = el.position;
  box.appendChild(position);
  box.appendChild(name);
  box.appendChild(score);
  box.style.setProperty("--color", el.color);
  container.appendChild(box);
  // fade the initial view
  box.style.opacity = 0.4;
})
j=0
// Using an arrow function to sort players by their name
let xx = data.toSorted((a, b) =>
  a.name < b.name ? -1 : a.name > b.name ? 1 : 0
);
xx.forEach((elstartx,j) => {
	//elstartx.position = "0";
	initialBodyUpdate(elstartx.name,j);
})
k=0;
data.forEach((el) => {	
	k++
	setTimeout(function() {
		if (el.name !== "") {
	bodyUpdate(el.name,el.score);
		}
   },k*800);

})
}

function bodyUpdate(nom,scr) {	 
    let elName = nom;
    data.find((team) => team.name === elName);
data
      .sort((a, b) => {
        if (b.score === a.score) {
          return a.name.localeCompare(b.name); // Sort by name if scores are equal
        }
        return b.score - a.score; // Sort by score in descending order
      })
	  // now sort out positions for same scores
	  var held=1;
	  var heldscore = 0
	 data.forEach((elem, ind) => {
          if (elem.score == heldscore) {
		      elem.position = held
		  } else {
		      elem.position = ind + 1;
		  }
		  held = elem.position;
		  heldscore = elem.score;
     });  
    let AllTeams = Array.from(document.querySelectorAll(".team"));
    var k=0
    AllTeams.forEach((element) => {
      let elementName = element.querySelector(".name");
      let elementScore = element.querySelector(".score");
      if (elementName.innerHTML == elName) {
        elementScore.innerHTML = scr;
        let newPosition = data.find(
        (team) => team.name === elementName.innerHTML
      ).position;
	  // move player position
	  // setProperty(propertyName, value)
element.style.opacity = 1 //0.4;
      element.style.setProperty("--i", newPosition);
setTimeout(function() {element.style.opacity = 1},800);
	  let elementPos = element.querySelector(".position");
	  elementPos.innerText = data.find((team) => team.name === elementName.innerHTML).position
	  }
    });
}	
  
function initialBodyUpdate(nom,pos) {	
    document.getElementById("name" + pos).innerText = nom;
	document.getElementById("position" + pos).innerText = "";
}	

function simulateClick(ele) {
		  var event = new MouseEvent('click', {
			view: window,
			bubbles: true,
			cancelable: true
		  });
		  cb = document.getElementById(ele);
		  cb.dispatchEvent(event);
}
	
























/*

resultsday1

https://docs.google.com/spreadsheets/d/e/2PACX-1vR_j1mQ5ImRhVvhxh4kyDs3O3MyAsv14ym7u96O5vJQi0KdpuHVjwyAg6zHh7oJ1mChgaDhNN6NdW8m/pub?gid=0&single=true&output=csv

*/













</script>
</body>

</html>
